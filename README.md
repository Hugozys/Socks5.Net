# Socks5.Net

An Implementation of SOCKS Protocol Version 5 in .NET based on [RFC 1928](https://datatracker.ietf.org/doc/html/rfc1928). Note that the current implementation only supports `NoAuthentication` authentication negotiation and `Connect` command, but this should be sufficient for my daily interaction with browser and internet. It is only used for learning SOCKS Protocol Version 5.

The Socks5 library implementation is located in `Socks5.Net` project. A separate extension project `Socks5.Net.Extensions` provides several traffic obfuscation strategies.

# Obfuscation Layer
The extension project provides two obfuscation strategies:
- Xor the traffic with a key stream generated by psuedo random number generator implemented in .NET
- Xor the traffic with a key stream derived from [Chacha20](https://datatracker.ietf.org/doc/html/rfc8439)
    - The extension project has a dependency on [NSec](https://github.com/ektrah/nsec), which is a cryptographic library for .NET 5.0 and .NET Core based on libsodium to leverage its `Chacha20` implementation.
```
                      [ofbuscation]
localhost <-> relay client <-> proxy server <-> target host 
```

# Sample Usage

A sample client is provided in `tools` directory which acts as a relay client which will obfuscate and forward the localhost traffic to the proxy server. One can launch the client in three modes:
- plaintext:
  - listen traffic on the specified port
  - forward all traffic to the specified proxy server
- xor
  - listen traffic on the specified port
  - for every incoming connection, perform key exchange with proxy server
  - Xor all the traffic from the port with a key stream generated by pesudo random number generator and then forward them to proxy server
- chacha20
  - listen traffic on a specific port locally
  - for every incoming connection, perform key exchange with proxy server
  - Encrypt all the traffic from the port with `Chacha20` encryption algorithm 

Correspondingly, a sample socks server is also provided in `tools` which acts as the SOCKS v5 server. It will de-obfuscate all the traffic from client and forward to target host. One can also launch the server in three modes:
- plaintext:
  - listen traffic on the specified port
  - serve every incoming connection using SOCKS V5 Protocol
- xor
  - listen on the specified port
  - for every incoming connection, perform key exchange with client
  - Xor all the traffic from with a key stream generated by pesudo random number generator
  - Serve incoming connection using SOCKS5 V5 Protocol

- chacha20
  - listen on a specific port locally
  - for every incoming connection, perform key exchange with client
  - decrypt all the traffic from the port with `Chacha20` encryption algorithm 
  - serve incoming connection using SOCKS5 V5 Protocol
# Build
You need to have dotnet sdk 5.0 installed on your build machine and run

`dotnet build .` 

in the root directory
